##############################################################################
#
#  Makefile for GAMESMAN
#  The Finite, Two-person Perfect-Information Game Generator
#
#  (G)ame-independent
#  (A)utomatic
#  (M)ove-tree
#  (E)xhaustive
#  (S)earch,
#  (M)anipulation
#  (A)nd
#  (N)avigation
#
#  GamesCrafters Research Group, UC Berkeley
#  Supervised by Dan Garcia <ddgarcia@cs.berkeley.edu>
#
##############################################################################

# @WARNGC@ Makefile.in
# @configure_input@

CC		= @CC@
CFLAGS		= @CFLAGS@ @TCLCFLAGS@ @GMPCFLAGS@
AR		= @AR@ cr
RANLIB		= @RANLIB@

LIBSUFFIX	= @LIBSUFFIX@
OBJSUFFIX	= @OBJSUFFIX@
EXESUFFIX	= @EXESUFFIX@


##############################################################################
### Files

DB_OBJ		=  db_store$(OBJSUFFIX) db_malloc$(OBJSUFFIX) db_buf$(OBJSUFFIX) db_bman$(OBJSUFFIX) db_basichash$(OBJSUFFIX) db$(OBJSUFFIX)

ifneq (@GMPCFLAGS@,)
UNIVHT_OBJ	= univht$(OBJSUFFIX)
UNIVDB_OBJ	= univdb$(OBJSUFFIX)
endif

##############################################################################
### Files

CORE=$(DB_OBJ)

INCLUDES=db_store.h db_malloc.h db.h db_buf.h db_bman.h db_basichash.h


##############################################################################
### Rules

all: gamesdb.a
clean:
	rm -rf gamesdb.a

gamesdb.a: $(CORE)
	rm -f $@
	$(AR) $@ $(CORE) ; $(RANLIB) $@
	cp gamesdb.a ../gamesdb.a ; $(RANLIB) ../gamesdb.a

$(CORE): %.o: %.c $(INCLUDES)
	$(CC) $(CFLAGS) -c -o $@ $<
